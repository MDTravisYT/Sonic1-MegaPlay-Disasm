PALETTEFADEOUT:
		MOVE.W	#$3F,	(V_PFADE_START).W
		MOVE.W	#$15,	D4
		
	PFO_LOOP:
		MOVE.B	#$12,	(V_VBLA_ROUTINE).W
		BSR.W	WAITFORVBLA
		BSR.S	FADEOUT_TOBLACK
		BSR.W	RUNPLC
		DBF		D4,	PFO_LOOP
		RTS
		
FADEOUT_TOBLACK:
		MOVEQ	#0,	D0
		LEA		(V_PAL_DRY).W,	A0
		MOVE.B	(V_PFADE_START).W,	D0
		ADDA.W	D0,	A0
		MOVE.B	(V_PFADE_START+1).W,	D0
		
	FOTB_DECOLOR:
		BSR.S	FADEOUT_DECOLOR
		DBF	D0,	FOTB_DECOLOR
		MOVEQ	#0,	D0
		LEA		(V_PAL_WATER).W,	A0
		MOVE.B	(V_PFADE_START).W,	D0
		ADDA.W	D0,	A0
		MOVE.B	(V_PFADE_START+1).W,	D0
		
	FOTB_DECOLOR2:
		BSR.S	FADEOUT_DECOLOR
		DBF		D0,	FOTB_DECOLOR2
		RTS
		
FADEOUT_DECOLOR:
	FODC_DERED:
		MOVE.W	(A0),	D2
		BEQ.S	FODC_NEXT
		MOVE.W	D2,	D1
		ANDI.W	#$E,	D1
		BEQ.S	FODC_DEGREEN
		SUBQ.W	#2,	(A0)+
		RTS
		
	FODC_DEGREEN:
		MOVE.W	D2,	D1
		ANDI.W	#$E0,	D1
		BEQ.S	FODC_DEBLUE
		SUBI.W	#$20,	(A0)+
		RTS
		
	FODC_DEBLUE:
		MOVE.W	D2,	D1
		ANDI.W	#$E00,	D1
		BEQ.S	FODC_NEXT
		SUBI.W	#$200,	(A0)+
		RTS
		
	FODC_NEXT:
		ADDQ.W	#2,	A0
		RTS