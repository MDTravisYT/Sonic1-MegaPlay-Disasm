VBLANK:
		MOVEM.L	D0-D7/A0-A6,	-(SP)
		JSR		(SUB_68A).L
		TST.B	(V_VBLA_ROUTINE).W
		BEQ.S	VBLA_00
		MOVE.L	#$40000010,	($C00004).L
		MOVE.L	(V_SCRPOSY_VDP).W,	($C00000).L
		BTST	#6,	(V_MEGADRIVE).W
		BEQ.S	VB_NOTPAL
		MOVE.W	#$700,	D0
		
	VB_WAITPAL:
		DBF		D0,	VB_WAITPAL
		
	VB_NOTPAL:
		MOVE.B	(V_VBLA_ROUTINE).W,	D0
		MOVE.B	#0,	(V_VBLA_ROUTINE).W
		MOVE.W	#1,	(F_HBLA_PAL).W
		ANDI.W	#$3E,	D0
		MOVE.W	VBLA_INDEX(PC,D0.W),	D0
		JSR		VBLA_INDEX(PC,D0.W)
		
	VBLA_MUSIC:
		JSR		UPDATEMUSIC
		
	VBLA_EXIT:
		ADDQ.L	#1,	(V_VBLA_COUNT).W
		BSR.W	SUB_81E
		MOVEM.L	(SP)+,	D0-D7/A0-A6
		RTE

		ALIGN	$E32
	VBLA_INDEX:	DC.B	'VBLANK ROUTINE INDEX'
		
		ALIGN	$E4E
	VBLA_00:	DC.B	'VBLANK ROUTINE 1'