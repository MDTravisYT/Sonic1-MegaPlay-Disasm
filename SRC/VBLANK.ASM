VBLANK:
		MOVEM.L	D0-D7/A0-A6,	-(SP)
		JSR		(SUB_68A).L
		TST.B	(V_VBLA_ROUTINE).W
		BEQ.S	VBLA_00
		MOVE.L	#$40000010,	($C00004).L
		MOVE.L	(V_SCRPOSY_VDP).W,	($C00000).L
		BTST	#6,	(V_MEGADRIVE).W
		BEQ.S	VB_NOTPAL
		MOVE.W	#$700,	D0
		
	VB_WAITPAL:
		DBF		D0,	VB_WAITPAL
		
	VB_NOTPAL:
		MOVE.B	(V_VBLA_ROUTINE).W,	D0
		MOVE.B	#0,	(V_VBLA_ROUTINE).W
		MOVE.W	#1,	(F_HBLA_PAL).W
		ANDI.W	#$3E,	D0
		MOVE.W	VBLA_INDEX(PC,D0.W),	D0
		JSR		VBLA_INDEX(PC,D0.W)
		
	VBLA_MUSIC:
		JSR		UPDATEMUSIC
		
	VBLA_EXIT:
		ADDQ.L	#1,	(V_VBLA_COUNT).W
		BSR.W	SUB_81E
		MOVEM.L	(SP)+,	D0-D7/A0-A6
		RTE

	VBLA_INDEX:
		DC.W	VBLA_00-VBLA_INDEX
		DC.W	VBLA_02-VBLA_INDEX
		DC.W	VBLA_04-VBLA_INDEX
		DC.W	VBLA_06-VBLA_INDEX
		DC.W	VBLA_08-VBLA_INDEX
		DC.W	VBLA_0A-VBLA_INDEX
		DC.W	VBLA_0C-VBLA_INDEX
		DC.W	VBLA_0E-VBLA_INDEX
		DC.W	VBLA_08-VBLA_INDEX
		DC.W	VBLA_10-VBLA_INDEX
		DC.W	VBLA_14-VBLA_INDEX
		DC.W	VBLA_12-VBLA_INDEX
		DC.W	VBLA_0C-VBLA_INDEX
		DC.W	VBLA_16-VBLA_INDEX
		
		ALIGN	$E4E
	VBLA_00:	DC.B	'VBLANK ROUTINE 0'
		ALIGN	$EDE
	VBLA_02:	DC.B	'VB2'
		ALIGN	$EE2
	VBLA_14:	DC.B	'VBLANK 14'
		ALIGN	$EF0
	VBLA_04:	DC.B	'VBLANK 4'
		ALIGN	$F0A
	VBLA_06:	DC.B	'VB6'
		ALIGN	$F10
	VBLA_08:	DC.B	'VBLANK ROUTINE 8'
		ALIGN	$102E
	VBLA_0A:	DC.B	'VBLANK ROUTINE A'
		ALIGN	$10E0
	VBLA_0C:	DC.B	'VBLANK ROUTINE C'
		ALIGN	$11DE
	VBLA_0E:	DC.B	'VBLANK ROUTINE E'
		ALIGN	$11EE
	VBLA_10:	DC.B	'VBLANK 10'
		ALIGN	$11FA
	VBLA_12:	DC.B	'VBLANK ROUTINE 12'
		ALIGN	$1346
	VBLA_16:	DC.B	'VBLANK ROUTINE 16'