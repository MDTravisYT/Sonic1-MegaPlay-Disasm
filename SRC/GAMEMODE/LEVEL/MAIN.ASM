GM_LEVEL:
		BSET	#7,	(V_GAMEMODE).W
		TST.W	(V_DEMO).W
		BMI.S	LEVEL_NOMUSICFADE
		MOVE.B	#$E0,	D0
		BSR.W	PLAYSOUND_SPECIAL
		
	LEVEL_NOMUSICFADE:
		BSR.W	CLEARPLC
		BSR.W	PALETTEFADEOUT
		TST.W	(V_DEMO).W
		BMI.S	LEVEL_CLRRAM
		MOVE	#$2700,	SR
		MOVE.L	#$70000002,	($C00004).L
		LEA	(NEM_TITLECARD).L,	A0
		BSR.W	NEMDEC
		MOVE	#$2300,	SR
		MOVEQ	#0,	D0
		MOVE.B	(V_ZONE).W,	D0
		LSL.W	#4,	D0
		LEA		(LEVELHEADERS).L,	A2
		LEA		(A2,D0.W),	A2
		MOVEQ	#0,	D0
		MOVE.B	(A2),	D0
		BEQ.S	LOC_3CA0
		BSR.W	ADDPLC
		
	LOC_3CA0:
		MOVEQ	#1,	D0
		BSR.W	ADDPLC
		
	LEVEL_CLRRAM:
		LEA		(V_OBJSPACE).W,	A1
		MOVEQ	#0,	D0
		MOVE.W	#$7FF,	D1
		
	LVL_CLRMISCRAM:
		MOVE.L	D0,	(A1)+
		DBF		D1,	LVL_CLRMISCRAM
		LEA		(V_MISC_VARIABLES).W,	A1
		MOVEQ	#0,	D0
		MOVE.W	#$15,	D1
		
	LVL_CLRVARRAM:
		MOVE.L	D0,	(A1)+
		DBF		D1,	LVL_CLRVARRAM
		LEA		(V_SCREENPOSX).W,	A1
		MOVEQ	#0,	D0
		MOVE.W	#$3F,	D1
	
	LVL_CLRTIMERAM:
		MOVE.L	D0,	(A1)+
		DBF		D1,	LVL_CLRTIMERAM
		LEA		(V_OSCILLATE).W,	A1
		MOVEQ	#0,	D0
		MOVE.W	#$43,	D1
		
	LOC_3CE0:
		MOVE.L	D0,	(A1)+
		DBF		D1,	LOC_3CE0
		MOVE	#$2700,	SR
		BSR.W	CLEARSCREEN
		LEA		($C00004).L,	A6
		MOVE.W	#$8B03,	(A6)
		MOVE.W	#$8230,	(A6)
		MOVE.W	#$8407,	(A6)
		MOVE.W	#$857C,	(A6)
		MOVE.W	#$9001,	(A6)
		MOVE.W	#$8004,	(A6)
		MOVE.W	#$8720,	(A6)
		MOVE.W	#$8ADF,	(V_HBLA_HREG).W
		MOVE.W	(V_HBLA_HREG).W,	(A6)
		CMPI.B	#1,	(V_ZONE).W
		BNE.S	LEVEL_LOADPAL
		MOVE.W	#$8014,	(A6)
		MOVEQ	#0,	D0
		MOVE.B	(V_ZONE+1).W,	D0
		ADD.W	D0,	D0
		LEA		(WATERHEIGHT).L,	A1
		MOVE.W	(A1,D0.W),	D0
		MOVE.W	D0,	(V_WATERPOS1).W
		MOVE.W	D0,	(V_WATERPOS2).W
		MOVE.W	D0,	(V_WATERPOS3).W
		CLR.B	(V_WTR_ROUTINE).W	
		CLR.B	(F_WTR_STATE).W
		MOVE.B	#1,	(F_WATER).W
		
	LEVEL_LOADPAL:
		MOVE.W	#$1E,	(V_AIR).W
		MOVE	#$2300,	SR
		MOVEQ	#3,	D0
		BSR.W	PALLOAD2
		CMPI.B	#1,	(V_ZONE).W
		BNE.S	LEVEL_GETBGM
		MOVEQ	#$F,	D0
		CMPI.B	#3,	(V_ZONE+1).W
		BNE.S	LEVEL_WATERPAL
		MOVEQ	#$10,	D0
		
	LEVEL_WATERPAL:
		BSR.W	PALLOAD3_WATER
		TST.B	(V_LASTLAMP).W
		BEQ.S	LEVEL_GETBGM
		MOVE.B	(V_LAMP_WTRSTAT).W,	(F_WTR_STATE).W
		
	LEVEL_GETBGM:
		TST.W	(V_DEMO).W
		BMI.S	LEVEL_SKIPTTLCARD
		MOVEQ	#0,	D0
		MOVE.B	(V_ZONE).W,	D0
		CMPI.W	#$103,	(V_ZONE).W
		BNE.S	LEVEL_BGMNOTLZ4
		MOVEQ	#5,	D0
		
	LEVEL_BGMNOTLZ4:
		CMPI.W	#$502,	(V_ZONE).W
		BNE.S	LEVEL_PLAYBGM
		MOVEQ	#6,	D0
		
	LEVEL_PLAYBGM:
		LEA		(MUSICLIST).L,	A1
		MOVE.B	(A1,D0.W),	D0
		BSR.W	PLAYSOUND
		MOVE.B	#$34,	(V_OBJSPACE+$80).W
		
	LEVEL_TTLCARDLOOP:
		MOVE.B	#$C,	(V_VBLA_ROUTINE).W
		BSR.W	WAITFORVBLA
		JSR		EXECUTEOBJECTS
		JSR		BUILDSPRITES
		BSR.W	RUNPLC
		MOVE.W	(V_OBJSPACE+$100+OBX).W,	D0
		CMP.W	(V_OBJSPACE+$100+$30).W,	D0
		BNE.S	LEVEL_TTLCARDLOOP
		TST.L	(V_PLC_BUFFER).W
		BNE.S	LEVEL_TTLCARDLOOP
		JSR		HUD_BASE
		
	LEVEL_SKIPTTLCARD:
		MOVEQ	#3,	D0
		BSR.W	PALLOAD1
		BSR.W	LEVELSIZELOAD
		BSR.W	DEFORMLAYERS
		BSET	#2,	(V_FG_SCROLL_FLAGS).W
		BSR.W	LEVELDATALOAD
		BSR.W	LOADTILESFROMSTART
		JSR	CONVERTCOLLISIONARRAY
		BSR.W	COLINDEXLOAD
		BSR.W	LZWATEFEATURES
		MOVE.B	#1,	(V_OBJSPACE).W
		TST.W	(V_DEMO).W
		BMI.S	LEVEL_CHKWATER
		MOVE.B	#$21,	(V_OBJSPACE+$40).W
		
	LEVEL_CHKWATER:
		MOVE.W	#0,	(F_DEBUGCHEAT).W
		MOVE.W	#0,	(V_JPADHOLD1).W
		CMPI.B	#1,	(V_ZONE).W
		BNE.S	LEVEL_LOADOBJ
		MOVE.B	#$1B,	(V_OBJSPACE+$780).W
		MOVE.W	#$60,	(V_OBJSPACE+$780+OBX).W
		MOVE.B	#$1B,	(V_OBJSPACE+$7C0).W
		MOVE.W	#$120,	(V_OBJSPACE+$7C0+OBX).W
		
	LEVEL_LOADOBJ:
		JSR		OBJPOSLOAD
		JSR		EXECUTEOBJECTS
		JSR		BUILDSPRITES
		MOVEQ	#0,	D0
		TST.B	(V_LASTLAMP).W
		BNE.S	LEVEL_SKIPCLR
		MOVE.W	D0,	(V_RINGS).W
		BSR.W	SUB_3164
		MOVEQ	#0,	D0
		MOVE.B	D0,	(V_LIFECOUNT).W
		
	LEVEL_SKIPCLR:
		MOVE.B	D0,	(F_TIMEOVER).W
		MOVE.B	D0,	(F_SHIELD).W
		MOVE.B	D0,	(V_INVINC).W
		MOVE.B	D0,	(V_SHOES).W
		MOVE.B	D0,	(V_UNUSED1).W
		MOVE.W	D0,	(V_DEBUGUSE).W
		MOVE.W	D0,	(F_RESTART).W
		MOVE.W	D0,	(V_FRAMECOUNT).W
		BSR.W	OSCILLATENUMINIT
		MOVE.B	#1,	(F_SCORECOUNT).W
		MOVE.B	#1,	(F_RINGCOUNT).W
		MOVE.B	#1,	(F_TIMECOUNT).W
		MOVE.W	#0,	(V_BTNPUSHTIME1).W
		LEA		(DEMODATAPTR).L,	A1
		MOVEQ	#0,	D0
		MOVE.B	(V_ZONE).W,	D0
		LSL.W	#2,	D0
		MOVEA.L	(A1,D0.W),	A1
		TST.W	(V_DEMO).W
		BPL.S	LEVEL_DEMO
		LEA		(DEMOENDDATAPTR).L,	A1
		MOVE.W	(V_CREDITSNUM).W,	D0
		SUBQ.W	#1,	D0
		LSL.W	#2,	D0
		MOVEA.L	(A1,D0.W),	A1
		
	LEVEL_DEMO:
		MOVE.B	1(A1),	(V_BTNPUSHTIME2).W
		SUBQ.B	#1,	(V_BTNPUSHTIME2).W
		MOVE.W	#$708,	(V_DEMOLENGTH).W
		TST.W	(V_DEMO).W
		BPL.S	LEVEL_CHKWATERPAL
		MOVE.W	#$21C,	(V_DEMOLENGTH).W
		CMPI.W	#4,	(V_CREDITSNUM).W
		BNE.S	LEVEL_CHKWATERPAL
		MOVE.W	#$1FE,	(V_DEMOLENGTH).W
		
	LEVEL_CHKWATERPAL:
		CMPI.B	#1,	(V_ZONE).W
		BNE.S	LEVEL_DELAY
		MOVEQ	#$B,	D0
		CMPI.B	#3,	(V_ZONE+1).W
		BNE.S	LEVEL_WTRNOTSBZ
		MOVEQ	#$D,	D0
		
	LEVEL_WTRNOTSBZ:
		BSR.W	PALLOAD4_WATER
		
	LEVEL_DELAY:
		MOVE.W	#3,	D1
		
	LEVEL_DELAYLOOP:
		MOVE.B	#8,	(V_VBLA_ROUTINE).W
		BSR.W	WAITFORVBLA
		DBF		D1,	LEVEL_DELAYLOOP
		MOVE.W	#$202F,	(V_PFADE_START).W
		BSR.W	PALFADEIN_ALT
		TST.W	(V_DEMO).W
		BMI.S	LEVEL_CLRCARDACT
		ADDQ.B	#2,	(V_OBJSPACE+$80+OBROUTINE).W
		ADDQ.B	#4,	(V_OBJSPACE+$C0+OBROUTINE).W
		ADDQ.B	#4,	(V_OBJSPACE+$100+OBROUTINE).W
		ADDQ.B	#4,	(V_OBJSPACE+$140+OBROUTINE).W
		BRA.S	LEVEL_STARTGAME
		
	LEVEL_CLRCARDACT:
		NOP
	
	LEVEL_STARTGAME: